{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict';\n\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst input = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('button[data-start]');\nlet selectedUserDate = {};\n\nstartBtn.setAttribute('disabled', '');\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    selectedUserDate = selectedDates[0];\n    updateStartButtonState(selectedUserDate);\n  },\n};\n// якщо обрана дата в минклому, то startBtn.disabled\nfunction updateStartButtonState(selectedUserDate) {\n  const currentDate = new Date();\n  currentDate.setHours(0, 0, 0, 0); // Задаємо час на 00:00:00 для порівняння з датою\n  if (selectedUserDate < currentDate || !selectedUserDate) {\n    startBtn.disabled = true;\n    //iziToast notification about error\n    iziToast.show({\n      message: 'Please choose a date in the future',\n    });\n  } else {\n    startBtn.disabled = false;\n  }\n}\nflatpickr(input, options);\n\n// якщо updateStartButtonState() пропускає нас то слухаємо кнопку і виводимо в консоль обрану дату\nstartBtn.addEventListener('click', evt => {\n  // ms difference between curent date and choose date\n  const dateDiff = selectedUserDate - Date.now();\n  displayTimeRemaining(dateDiff);\n  convertMs(dateDiff);\n});\n\nfunction displayTimeRemaining(duration) {\n  if (duration <= 0) {\n    console.log('Таймер завершено!');\n    return;\n  }\n\n  convertMs(duration);\n\n  if (duration > 0) {\n    setTimeout(() => {\n      displayTimeRemaining(duration - 1000);\n    }, 1000);\n  }\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return addLeadingZero(days, hours, minutes, seconds);\n}\n\n//додаємо в html значення\nconst addLeadingZero = (days, hours, minutes, seconds) => {\n  const dataDays = document.querySelector('.timer [data-days]');\n  const dataHours = document.querySelector('.timer [data-hours]');\n  const dataMinutes = document.querySelector('.timer [data-minutes]');\n  const dataSeconds = document.querySelector('.timer [data-seconds]');\n\n  //додаємо 0 перед числом, якщо воно однозначне\n  dataDays.textContent = days.toString().padStart(2, '0');\n  dataHours.textContent = hours.toString().padStart(2, '0');\n  dataMinutes.textContent = minutes.toString().padStart(2, '0');\n  dataSeconds.textContent = seconds.toString().padStart(2, '0');\n};\n\n//призавантаженні сторінки таймер по 00\ndocument.addEventListener('DOMContentLoaded', () => {\n  addLeadingZero(0, 0, 0, 0);\n});\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}"],"names":["input","startBtn","selectedUserDate","options","selectedDates","updateStartButtonState","currentDate","iziToast","flatpickr","evt","dateDiff","displayTimeRemaining","convertMs","duration","ms","days","hours","minutes","seconds","addLeadingZero","dataDays","dataHours","dataMinutes","dataSeconds"],"mappings":"0FAOA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,oBAAoB,EAC5D,IAAIC,EAAmB,CAAA,EAEvBD,EAAS,aAAa,WAAY,EAAE,EAEpC,MAAME,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAClCC,EAAuBH,CAAgB,CACxC,CACH,EAEA,SAASG,EAAuBH,EAAkB,CAChD,MAAMI,EAAc,IAAI,KACxBA,EAAY,SAAS,EAAG,EAAG,EAAG,CAAC,EAC3BJ,EAAmBI,GAAe,CAACJ,GACrCD,EAAS,SAAW,GAEpBM,EAAS,KAAK,CACZ,QAAS,oCACf,CAAK,GAEDN,EAAS,SAAW,EAExB,CACAO,EAAUR,EAAOG,CAAO,EAGxBF,EAAS,iBAAiB,QAASQ,GAAO,CAExC,MAAMC,EAAWR,EAAmB,KAAK,IAAG,EAC5CS,EAAqBD,CAAQ,EAC7BE,EAAUF,CAAQ,CACpB,CAAC,EAED,SAASC,EAAqBE,EAAU,CACtC,GAAIA,GAAY,EAAG,CACjB,QAAQ,IAAI,mBAAmB,EAC/B,MACD,CAEDD,EAAUC,CAAQ,EAEdA,EAAW,GACb,WAAW,IAAM,CACfF,EAAqBE,EAAW,GAAI,CACrC,EAAE,GAAI,CAEX,CAEA,SAASD,EAAUE,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,OAAOK,EAAeJ,EAAMC,EAAOC,EAASC,CAAO,CACrD,CAGA,MAAMC,EAAiB,CAACJ,EAAMC,EAAOC,EAASC,IAAY,CACxD,MAAME,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAY,SAAS,cAAc,qBAAqB,EACxDC,EAAc,SAAS,cAAc,uBAAuB,EAC5DC,EAAc,SAAS,cAAc,uBAAuB,EAGlEH,EAAS,YAAcL,EAAK,SAAU,EAAC,SAAS,EAAG,GAAG,EACtDM,EAAU,YAAcL,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,EACxDM,EAAY,YAAcL,EAAQ,SAAU,EAAC,SAAS,EAAG,GAAG,EAC5DM,EAAY,YAAcL,EAAQ,SAAU,EAAC,SAAS,EAAG,GAAG,CAC9D,EAGA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDC,EAAe,EAAG,EAAG,EAAG,CAAC,CAC3B,CAAC,EAED,QAAQ,IAAIP,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}